<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Dragable cat</title>
    <style type="text/css">
        #cat {
            position: absolute;
            left: 50px;
            top: 50px;
            -webkit-transform: rotate(-80deg); 
            -o-transform: rotate(-80deg);
            -moz-transform: rotate(-80deg);
            transform: rotate(-80deg);
        }
        #miao {
            position: absolute;
            display: none;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <img src="oct.png" alt="octcat" id="cat">
    <span id="miao">喵</span>
    <script type="text/javascript">
        (function (d) {
            var cat = d.getElementById('cat'),
                miao = d.getElementById('miao'),
                catX = 0,
                catY = 0,
                originMouseX = 0,
                originMouseY = 0,
                flag = false;

            cat.onmousedown = function(e) {
                e.preventDefault();
                var xy = getXY(e);
                catX = _getComputedStyle(cat, 'left');
                catY = _getComputedStyle(cat, 'top');
                originMouseX = xy.x;
                originMouseY = xy.y;
                flag = true;
            }

            document.onmousemove = function(e) {
                e.preventDefault();
                var xy = getXY(e);
                if (flag) {  
                    cat.style.left = catX + (xy.x - originMouseX) + "px";
                    cat.style.top = catY + (xy.y - originMouseY) + "px";
                }
            }

            cat.onmouseup = function(e) {
                e.preventDefault();
                var xy = getXY(e);
                flag = false;
                originMouseX = xy.x;
                originMouseY = xy.y;
                catX = _getComputedStyle(cat, 'left');
                catY = _getComputedStyle(cat, 'top');
            }

            // 获取时间中鼠标的坐标，以{x: ,y: }的形式返回
            function getXY(e) {
                var xy = {};
                if (window.event) {
                    xy.x = window.event.clientX;
                    xy.y = window.event.clientY;
                } else {
                    xy.x = e.pageX;
                    xy.y = e.pageY;
                }
                return xy;
            }

            function move() {
                var a = getXY();
                if (flag) {
                    console.log("click");
                    console.log(catX);
                    console.log(catY);
                    catX = a.x;
                    catY = a.y;   
                    cat.style.left = catX + "px";
                    cat.style.top = catY + "px";
                    console.log(a.x);
                    console.log(a.y);
                    moveaTimer = setTimeout(move, 10);
                } else {
                    
                    clearTimeout(moveaTimer);
                }
            }

            // 获取Element对象的一个样式属性值
            function _getComputedStyle(element, property) {
                return parseInt(window.getComputedStyle(element, null)[property]);
            }
        }(document));
    </script>
</body>
</html>